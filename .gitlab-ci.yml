
stages:
  - build
  - test

build:
  stage: build
  tags:
    - all
  script:
    - apt-get update -qy
    - apt-get install -y libglfw3 libglfw3-dev ocl-icd-libopencl1 ocl-icd-opencl-dev build-essential cmake git googletest libgtest-dev
    - cmake -B build
    - cmake --build build
  artifacts:
    paths:
      - build/
    expire_in: 1 week

GoogleTests:
  stage: test
  dependencies:
    - build
  tags:
    - all
  script:
    - echo "Testing in progress..."
    - .\build\tests\TestApp_test_run   

  environment: production
